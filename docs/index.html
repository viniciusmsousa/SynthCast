<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Synthetic Control Method to Forecast Series • SynthCast</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Synthetic Control Method to Forecast Series">
<meta property="og:description" content="Uses the Synth Package to make forecasts on panel data.
    Check the package site to have an example and for more information
    on the Synth Package see Abadie et al. (2011) &lt;doi:10.18637/jss.v042.i13&gt;.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">SynthCast</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="synthcast" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#synthcast" class="anchor"></a>SynthCast</h1></div>
<!-- badges: start -->

<div id="objective" class="section level2">
<h2 class="hasAnchor">
<a href="#objective" class="anchor"></a>Objective</h2>
<p>The objective of the package is to provide an <em>ad-hoc</em> forecasting approach for problems where (i) there are units in different stages of a certain journey, (ii) there the assumption that the units’ behavior throw out the journey are similar is valid and (iii) there are not enough data to use traditional forecasting methods. A practical example might help to better illustrate such problems.</p>
</div>
<div id="example-of-problem-that-could-benefit-from-the-package" class="section level2">
<h2 class="hasAnchor">
<a href="#example-of-problem-that-could-benefit-from-the-package" class="anchor"></a>Example of Problem that Could Benefit from the Package</h2>
<p>Take the credit card business for example. The profit from credit card products comes from the sum of financial results of each individual. It is known that every customer starts with a negative result, since the bank had to spend money to attract the customers, so you have an acquisition cost. Once a costumer get his/her card he/she can either start using the credit card or simply keep it without using. In the first case, if the person pays credit card bills: great, there will be revenue until it reaches a payback moment and starts having a profitable result. But if the person fails to pay the bills then the result will be a lost. On the other hand, if the customer simply does not use the credit card, then its financial result will move horizontally.</p>
<p>In this scenario, the units are the clients (or group of clients), the journey is the profitability of a credit card product and there is no reason to believe that the profitability over time of a new client would have a different shape of the options above (of course it will not be identical). Now, imagine that the product is relatively new, around 2~3 years. This means that the older profitability series is around 24/36 months. But the majority of series would be smaller. There is not enough data to use time series algorithms with ease. So, the idea is to use the older clients, that are in their 24/36 months, to predict how the newer clients would be in their 24/36 months.</p>
<p>In order to do so, the SynthCast uses the <a href="https://www.jstatsoft.org/article/view/v042i13">Synthetic Control</a> Method to find a synthetic combination that represents the unit of interest based on a series of numerical features. The following section goes through ans usage example of the package.</p>
</div>
<div id="synthcast-usage" class="section level2">
<h2 class="hasAnchor">
<a href="#synthcast-usage" class="anchor"></a>SynthCast Usage</h2>
<div id="instalation" class="section level3">
<h3 class="hasAnchor">
<a href="#instalation" class="anchor"></a>Instalation</h3>
<p>The package can be installed from Cran:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"SynthCast"</span><span class="op">)</span></code></pre></div>
<p>As well as from github:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span>
    <span class="st">"viniciusmsousa/SynthCast"</span>,ref<span class="op">=</span><span class="st">"main"</span>
<span class="op">)</span></code></pre></div>
</div>
<div id="example" class="section level3">
<h3 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h3>
<p>This section is a walk through of how the package was inted to be used with a pratical example.</p>
<div id="the-dataset" class="section level4">
<h4 class="hasAnchor">
<a href="#the-dataset" class="anchor"></a>The Dataset</h4>
<p>The first thing that a forecast needs a data to be forecasted. The SynthCast provides a example of how it expected a dataset to look like, the code bellow loads the package and the example dataset:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://viniciusmsousa.github.io/SynthCast/">SynthCast</a></span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span><span class="op">(</span><span class="st">'df_example'</span><span class="op">)</span>
<span class="fu">kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">df_example</span><span class="op">)</span><span class="op">)</span> </code></pre></div>
<table class="table">
<colgroup>
<col width="1%">
<col width="4%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="1%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="1%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="1%">
<col width="3%">
<col width="3%">
<col width="3%">
<col width="1%">
<col width="3%">
<col width="3%">
</colgroup>
<thead><tr class="header">
<th align="right">unit</th>
<th align="right">time_period</th>
<th align="right">x1</th>
<th align="right">x2</th>
<th align="right">x3</th>
<th align="right">x4</th>
<th align="right">x5</th>
<th align="right">x6</th>
<th align="right">x7</th>
<th align="right">x8</th>
<th align="right">x9</th>
<th align="right">x10</th>
<th align="right">x11</th>
<th align="right">x12</th>
<th align="right">x13</th>
<th align="right">x14</th>
<th align="right">x15</th>
<th align="right">x16</th>
<th align="right">x17</th>
<th align="right">x18</th>
<th align="right">x19</th>
<th align="right">x20</th>
<th align="right">x21</th>
<th align="right">x22</th>
<th align="right">x23</th>
<th align="right">x24</th>
<th align="right">x25</th>
<th align="right">x26</th>
<th align="right">x27</th>
<th align="right">x28</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">1</td>
<td align="right">0.4279268</td>
<td align="right">0.2329316</td>
<td align="right">0.4531898</td>
<td align="right">0.5010649</td>
<td align="right">0.0140657</td>
<td align="right">0.5</td>
<td align="right">0.0103704</td>
<td align="right">0.0126492</td>
<td align="right">0.0061209</td>
<td align="right">0.0016722</td>
<td align="right">0.0020701</td>
<td align="right">0.0229175</td>
<td align="right">0.1717596</td>
<td align="right">0.0028440</td>
<td align="right">0.2961483</td>
<td align="right">0.2777202</td>
<td align="right">0.0179579</td>
<td align="right">0.5</td>
<td align="right">0.0186335</td>
<td align="right">0.0196256</td>
<td align="right">0.0140659</td>
<td align="right">0.5</td>
<td align="right">0.0191083</td>
<td align="right">0.0193874</td>
<td align="right">0.0280014</td>
<td align="right">0.5</td>
<td align="right">0.0062926</td>
<td align="right">0.0193874</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">2</td>
<td align="right">0.3923215</td>
<td align="right">0.0661752</td>
<td align="right">0.4300946</td>
<td align="right">0.4639223</td>
<td align="right">0.1523873</td>
<td align="right">0.5</td>
<td align="right">0.0167901</td>
<td align="right">0.1340623</td>
<td align="right">0.0940312</td>
<td align="right">0.0016722</td>
<td align="right">0.0063536</td>
<td align="right">0.0896040</td>
<td align="right">0.1362349</td>
<td align="right">0.0028440</td>
<td align="right">0.2961483</td>
<td align="right">0.2352990</td>
<td align="right">0.1657939</td>
<td align="right">0.5</td>
<td align="right">0.1428571</td>
<td align="right">0.1479287</td>
<td align="right">0.1589145</td>
<td align="right">0.5</td>
<td align="right">0.1974522</td>
<td align="right">0.1750037</td>
<td align="right">0.1949374</td>
<td align="right">0.5</td>
<td align="right">0.0181592</td>
<td align="right">0.1750037</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">3</td>
<td align="right">0.4420440</td>
<td align="right">0.1649872</td>
<td align="right">0.4336537</td>
<td align="right">0.5034269</td>
<td align="right">0.2919640</td>
<td align="right">0.5</td>
<td align="right">0.0395062</td>
<td align="right">0.2602215</td>
<td align="right">0.1796289</td>
<td align="right">0.0016722</td>
<td align="right">0.0137895</td>
<td align="right">0.1695727</td>
<td align="right">0.1045988</td>
<td align="right">0.0028440</td>
<td align="right">0.2961483</td>
<td align="right">0.2088865</td>
<td align="right">0.3180237</td>
<td align="right">0.5</td>
<td align="right">0.3167702</td>
<td align="right">0.2890312</td>
<td align="right">0.3442300</td>
<td align="right">0.5</td>
<td align="right">0.3949045</td>
<td align="right">0.3201550</td>
<td align="right">0.2198580</td>
<td align="right">0.5</td>
<td align="right">0.0167533</td>
<td align="right">0.3201550</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">4</td>
<td align="right">0.4545717</td>
<td align="right">0.1076923</td>
<td align="right">0.4433019</td>
<td align="right">0.5427364</td>
<td align="right">0.4315704</td>
<td align="right">0.5</td>
<td align="right">0.0501235</td>
<td align="right">0.3791298</td>
<td align="right">0.2685505</td>
<td align="right">0.0016722</td>
<td align="right">0.0172917</td>
<td align="right">0.2420208</td>
<td align="right">0.0822586</td>
<td align="right">0.0028440</td>
<td align="right">0.2961483</td>
<td align="right">0.1556901</td>
<td align="right">0.4694968</td>
<td align="right">0.5</td>
<td align="right">0.4223602</td>
<td align="right">0.4250857</td>
<td align="right">0.5346481</td>
<td align="right">0.5</td>
<td align="right">0.5859873</td>
<td align="right">0.4600435</td>
<td align="right">0.2291281</td>
<td align="right">0.5</td>
<td align="right">0.0072638</td>
<td align="right">0.4600435</td>
</tr>
<tr class="odd">
<td align="right">1</td>
<td align="right">5</td>
<td align="right">0.4223203</td>
<td align="right">0.1391912</td>
<td align="right">0.4767905</td>
<td align="right">0.5474351</td>
<td align="right">0.5673960</td>
<td align="right">0.5</td>
<td align="right">0.0501235</td>
<td align="right">0.4999604</td>
<td align="right">0.3522328</td>
<td align="right">0.1638796</td>
<td align="right">0.0279551</td>
<td align="right">0.3139178</td>
<td align="right">0.0689121</td>
<td align="right">0.2787148</td>
<td align="right">0.0835851</td>
<td align="right">0.1119981</td>
<td align="right">0.6177005</td>
<td align="right">0.5</td>
<td align="right">0.6149068</td>
<td align="right">0.5627327</td>
<td align="right">0.7247700</td>
<td align="right">0.5</td>
<td align="right">0.7834395</td>
<td align="right">0.5979929</td>
<td align="right">0.2351954</td>
<td align="right">0.5</td>
<td align="right">0.0072638</td>
<td align="right">0.5979929</td>
</tr>
<tr class="even">
<td align="right">1</td>
<td align="right">6</td>
<td align="right">0.3827364</td>
<td align="right">0.1078405</td>
<td align="right">0.5021293</td>
<td align="right">0.5456524</td>
<td align="right">0.6992290</td>
<td align="right">0.5</td>
<td align="right">0.0688889</td>
<td align="right">0.6161397</td>
<td align="right">0.4334900</td>
<td align="right">0.3311037</td>
<td align="right">0.0335161</td>
<td align="right">0.3829171</td>
<td align="right">0.0602702</td>
<td align="right">0.2787148</td>
<td align="right">0.0835851</td>
<td align="right">0.0985164</td>
<td align="right">0.7600335</td>
<td align="right">0.5</td>
<td align="right">0.7826087</td>
<td align="right">0.6957559</td>
<td align="right">0.9102858</td>
<td align="right">0.5</td>
<td align="right">0.9745223</td>
<td align="right">0.7413431</td>
<td align="right">0.2458748</td>
<td align="right">0.5</td>
<td align="right">0.0072638</td>
<td align="right">0.7413431</td>
</tr>
</tbody>
</table>
<p>The dataset is expected to have 3 types of columns:</p>
<ul>
<li><ol>
<li>
<em>A unit column</em>: containing a numeric identification of the unit. In the credit card example this could the the customer, a group of customer, etc.,;</li>
</ol></li>
<li><ol>
<li>
<em>A time columns</em>: containing the time in integer. In the credit card example this would be the age in months of the respective unit (say 1 for first month, 2 for the second month, etc.,);</li>
</ol></li>
<li><ol>
<li>
<em>Feature Columns</em>: Numeric features, with both the serie(s) that will be forecasted as well as features to use to forecast. In the credit card this could be the profitability and transactional features.</li>
</ol></li>
</ul>
<p>The table bellow shows the max time for each unit:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>

<span class="va">df_example</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span><span class="op">(</span><span class="va">unit</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html">summarise</a></span><span class="op">(</span>max_time_period<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span><span class="op">(</span><span class="va">time_period</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">unit</span> <span class="op">%in%</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">3</span>, <span class="fl">4</span>, <span class="fl">5</span>, <span class="fl">45</span>, <span class="fl">46</span>, <span class="fl">47</span>, <span class="fl">48</span>, <span class="fl">49</span>, <span class="fl">50</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span> 
  <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="right">unit</th>
<th align="right">max_time_period</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="right">1</td>
<td align="right">50</td>
</tr>
<tr class="even">
<td align="right">2</td>
<td align="right">49</td>
</tr>
<tr class="odd">
<td align="right">3</td>
<td align="right">48</td>
</tr>
<tr class="even">
<td align="right">4</td>
<td align="right">47</td>
</tr>
<tr class="odd">
<td align="right">5</td>
<td align="right">46</td>
</tr>
<tr class="even">
<td align="right">45</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="right">46</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="right">47</td>
<td align="right">4</td>
</tr>
<tr class="odd">
<td align="right">48</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="right">49</td>
<td align="right">2</td>
</tr>
<tr class="odd">
<td align="right">50</td>
<td align="right">1</td>
</tr>
</tbody>
</table>
<p>As one can see the older unit (the smaller the number the older the unit is) the longer is the time series that are available (larger values in the <code>time_period</code> column). This means that the data from older units can be used to forecast the younger units. For example, the data from units <code>18</code> to <code>1</code> could be used to predict the next <code>12</code> periods of the unit <code>30</code>. This is excatly what the function <code><a href="reference/run_synthetic_forecast.html">run_synthetic_forecast()</a></code> does (To better understand how it is working under the hood it is recommend to check the <a href="https://www.jstatsoft.org/article/view/v042i13">Synthetic Control Synth Package paper</a>.).</p>
<p>The function call bellow runs a synthetic forecast of <code>12</code> time periods of the series <code>x1</code> of the unit 30.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">synthetic_forecast</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run_synthetic_forecast.html">run_synthetic_forecast</a></span><span class="op">(</span>
  df <span class="op">=</span> <span class="va">df_example</span>,
  col_unit_name <span class="op">=</span> <span class="st">'unit'</span>,
  col_time<span class="op">=</span><span class="st">'time_period'</span>,
  periods_to_forecast<span class="op">=</span><span class="fl">12</span>,
  unit_of_interest <span class="op">=</span> <span class="st">'30'</span>,
  serie_of_interest <span class="op">=</span> <span class="st">'x1'</span>
<span class="op">)</span>
<span class="co">#&gt; [1] "Forecasting Unit:  30 . Serie:  x1"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; X1, X0, Z1, Z0 all come directly from dataprep object.</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt;  searching for synthetic control unit  </span>
<span class="co">#&gt;  </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; **************** </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; MSPE (LOSS V): 0.005105562 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.v:</span>
<span class="co">#&gt;  0.03795838 0.02953412 0.03356642 0.01533716 0.1226315 0.1285906 0.05816525 0.02318678 0.01465216 0.01080646 0.06187415 0.0289542 0.01702719 0.08006876 0.009607601 0.01627082 0.1278952 0.02615566 0.01342692 0.04431671 0.04468165 0.01097563 0.04431671 </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; solution.w:</span>
<span class="co">#&gt;  1.1452e-05 0.0002666085 0.0001873182 0.0002686277 0.0001636778 0.0003347625 0.0004905744 0.0005939929 0.0005203545 0.5502766 4.8739e-06 0.0007708196 0.0003844661 0.001002508 0.000803214 0.000999687 0.1285913 0.3143298</span></code></pre></div>
<p>The output of the function is a list with 4 tables.</p>
</div>
</div>
<div id="synthetic-forecat-results" class="section level3">
<h3 class="hasAnchor">
<a href="#synthetic-forecat-results" class="anchor"></a>Synthetic Forecat Results</h3>
<p>These are the 4 tables that are returned by the function call.</p>
<div id="table-1-synthetic_control_composition" class="section level4">
<h4 class="hasAnchor">
<a href="#table-1-synthetic_control_composition" class="anchor"></a>Table 1: <code>synthetic_control_composition</code>
</h4>
<p>This table summarizes the results related to the unit selection from the Synthetic Control method. The columns are the following:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">kable</span><span class="op">(</span><span class="va">synthetic_forecast</span><span class="op">$</span><span class="va">synthetic_control_composition</span><span class="op">)</span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">execution_date</th>
<th align="left">projected_unit</th>
<th align="left">projected_serie</th>
<th align="left">synthetic_units</th>
<th align="right">w.weights</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">10</td>
<td align="right">0.550</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">18</td>
<td align="right">0.314</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">17</td>
<td align="right">0.129</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">8</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">9</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">12</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">14</td>
<td align="right">0.001</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">15</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">16</td>
<td align="right">0.001</td>
</tr>
</tbody>
</table>
<ul>
<li>
<code>execution_date</code>: The date that the forecast was executed in the YYYY-MM-DD format;</li>
<li>
<code>projected_unit</code>: The forcasted unit;</li>
<li>
<code>projected_serie</code>: The forecasted serie;</li>
<li>
<code>synthetic_units</code>/<code>w.weights</code>: the units (from <code>18</code> to <code>1</code>) selected and their recpective weights.</li>
</ul>
</div>
<div id="table-2-variable_importance_and_comparison" class="section level4">
<h4 class="hasAnchor">
<a href="#table-2-variable_importance_and_comparison" class="anchor"></a>Table 2: <code>variable_importance_and_comparison</code>
</h4>
<p>This table summarizes the results related to the features/variables selection from the Synthetic Control method. The columns are the following:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">kable</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span><span class="op">(</span><span class="va">synthetic_forecast</span><span class="op">$</span><span class="va">variable_importance_and_comparison</span>,<span class="fl">8</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="15%">
<col width="15%">
<col width="16%">
<col width="8%">
<col width="17%">
<col width="9%">
<col width="7%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="left">execution_date</th>
<th align="left">projected_unit</th>
<th align="left">projected_serie</th>
<th align="left">variable</th>
<th align="right">unit_of_interest</th>
<th align="right">synthetic</th>
<th align="right">sample</th>
<th align="right">v.weights</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">x8</td>
<td align="right">0.474</td>
<td align="right">0.550</td>
<td align="right">0.567</td>
<td align="right">0.129</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">x20</td>
<td align="right">0.537</td>
<td align="right">0.613</td>
<td align="right">0.630</td>
<td align="right">0.128</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">x7</td>
<td align="right">0.110</td>
<td align="right">0.099</td>
<td align="right">0.088</td>
<td align="right">0.123</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">x16</td>
<td align="right">0.289</td>
<td align="right">0.192</td>
<td align="right">0.168</td>
<td align="right">0.080</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">x13</td>
<td align="right">0.237</td>
<td align="right">0.145</td>
<td align="right">0.116</td>
<td align="right">0.062</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">x9</td>
<td align="right">0.443</td>
<td align="right">0.441</td>
<td align="right">0.433</td>
<td align="right">0.058</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">x25</td>
<td align="right">0.517</td>
<td align="right">0.370</td>
<td align="right">0.317</td>
<td align="right">0.045</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="left">x24</td>
<td align="right">0.729</td>
<td align="right">0.709</td>
<td align="right">0.699</td>
<td align="right">0.044</td>
</tr>
</tbody>
</table>
<ul>
<li>
<code>execution_date</code>: The date that the forecast was executed in the YYYY-MM-DD format;</li>
<li>
<code>projected_unit</code>: The forcasted unit;</li>
<li>
<code>projected_serie</code>: The forecasted serie;</li>
<li>
<code>variable</code>: The variable selected;</li>
<li>
<code>unit_of_interest</code>: The mean value over time of the variable in column <code>variable</code> from the unit in the <code>projected_unit</code>;</li>
<li>
<code>synthetic</code>: The mean value over time of the variable in column <code>variable</code> of the syntehtic unit;</li>
<li>
<code>sample</code>: The mean value over time of the variable in column <code>variable</code> of the whole dataset;</li>
<li>
<code>v.weights</code>: The weight of the variable in the column <code>variable</code>.</li>
</ul>
</div>
<div id="table-3-mape_backtest" class="section level4">
<h4 class="hasAnchor">
<a href="#table-3-mape_backtest" class="anchor"></a>Table 3: <code>mape_backtest</code>
</h4>
<p>This table depicts the results of a simple mape back test on the period it was used to forecast. It is worth noting that the intention is not to provide a robust method for validation the model. The Synthetic Control Method is a mathematical approach, not an machine learning, that minimizes the distance without worrying about overfitting the curves. The columns are the following:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">kable</span><span class="op">(</span><span class="va">synthetic_forecast</span><span class="op">$</span><span class="va">mape_backtest</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="10%">
<col width="10%">
<col width="10%">
<col width="18%">
<col width="13%">
<col width="15%">
<col width="14%">
<col width="6%">
</colgroup>
<thead><tr class="header">
<th align="left">execution_date</th>
<th align="left">projected_unit</th>
<th align="left">projected_serie</th>
<th align="right">max_time_unit_of_interest</th>
<th align="right">periods_to_forecast</th>
<th align="right">elegible_control_units</th>
<th align="right">number_control_units</th>
<th align="right">mape</th>
</tr></thead>
<tbody><tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="left">x1</td>
<td align="right">21</td>
<td align="right">12</td>
<td align="right">17</td>
<td align="right">9</td>
<td align="right">13.00928</td>
</tr></tbody>
</table>
<ul>
<li>
<code>execution_date</code>: The date that the forecast was executed in the YYYY-MM-DD format;</li>
<li>
<code>projected_unit</code>: The forcasted unit;</li>
<li>
<code>projected_serie</code>: The forecasted serie;</li>
<li>
<code>max_time_unit_of_interest</code>: The age of the unit of interest;</li>
<li>
<code>periods_to_forecast</code>: Periods that were forecasted;</li>
<li>
<code>elegible_control_units</code>: Number of elegible units to be used to forecast;</li>
<li>
<code>mape</code>: The mean absolute percentage error in the from 1 to <code>max_time_unit_of_interest</code>.</li>
</ul>
</div>
<div id="table-4-output_projecao" class="section level4">
<h4 class="hasAnchor">
<a href="#table-4-output_projecao" class="anchor"></a>Table 4: <code>output_projecao</code>
</h4>
<p>This tables contains the projection itself. The columns are the following:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu">kable</span><span class="op">(</span><span class="va">synthetic_forecast</span><span class="op">$</span><span class="va">output_projecao</span><span class="op">)</span></code></pre></div>
<table class="table">
<colgroup>
<col width="16%">
<col width="16%">
<col width="13%">
<col width="23%">
<col width="14%">
<col width="16%">
</colgroup>
<thead><tr class="header">
<th align="left">execution_date</th>
<th align="left">projected_unit</th>
<th align="right">time_period</th>
<th align="right">projected_serie_value</th>
<th align="right">is_projected</th>
<th align="left">projected_serie</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">1</td>
<td align="right">0.4354680</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">2</td>
<td align="right">0.4321821</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">3</td>
<td align="right">0.5256354</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">4</td>
<td align="right">0.4840789</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">5</td>
<td align="right">0.3801790</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">6</td>
<td align="right">0.2640425</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">7</td>
<td align="right">0.1495329</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">8</td>
<td align="right">0.2581808</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">9</td>
<td align="right">0.2937315</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">10</td>
<td align="right">0.3000216</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">11</td>
<td align="right">0.3381660</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">12</td>
<td align="right">0.3035805</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">13</td>
<td align="right">0.2989308</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">14</td>
<td align="right">0.6051545</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">15</td>
<td align="right">0.3462337</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">16</td>
<td align="right">0.3895760</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">17</td>
<td align="right">0.4199159</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">18</td>
<td align="right">0.4777851</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">19</td>
<td align="right">0.5354843</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">20</td>
<td align="right">0.4860005</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">21</td>
<td align="right">0.4963447</td>
<td align="right">0</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">22</td>
<td align="right">0.4928737</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">23</td>
<td align="right">0.4534551</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">24</td>
<td align="right">0.4750725</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">25</td>
<td align="right">0.4928884</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">26</td>
<td align="right">0.7005200</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">27</td>
<td align="right">0.3911140</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">28</td>
<td align="right">0.4438282</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">29</td>
<td align="right">0.4673172</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">30</td>
<td align="right">0.4722184</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">31</td>
<td align="right">0.4898868</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
<tr class="even">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">32</td>
<td align="right">0.5014260</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
<tr class="odd">
<td align="left">2021-06-09</td>
<td align="left">30</td>
<td align="right">33</td>
<td align="right">0.4313357</td>
<td align="right">1</td>
<td align="left">x1</td>
</tr>
</tbody>
</table>
<ul>
<li>
<code>execution_date</code>: The date that the forecast was executed in the YYYY-MM-DD format;</li>
<li>
<code>projected_unit</code>: The forcasted unit;</li>
<li>
<code>time_period</code>: The time period;</li>
<li>
<code>projected_serie</code>: The forecasted serie;</li>
<li>
<code>projected_serie_value</code>: The value of the seria/variable that was projected, from colun <code>projected_serie</code>;</li>
<li>
<code>is_projected</code>: 1 indicates that the value is projected, 0 indicates that the value is observed.</li>
</ul>
</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Vinicius Sousa <br><small class="roles"> Author, copyright holder, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#stable"><img src="https://img.shields.io/badge/lifecycle-stable-brightgreen.svg" alt="Lifecycle: stable"></a></li>
<li><a href="https://github.com/viniciusmsousa/SynthCast/actions"><img src="https://github.com/viniciusmsousa/SynthCast/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/viniciusmsousa/SynthCast?branch=main"><img src="https://codecov.io/gh/viniciusmsousa/SynthCast/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Vinicius Sousa.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
